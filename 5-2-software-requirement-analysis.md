# Software Requirement Analysis

| PREPARED BY | NAME | TITLE | SIGNATURE |
| :---------- | :--- | :---- | :-------- |
| REVIEW BY   |      |       |           |
| APPROVED BY |      |       |           |

## Table of Contents
- [Software Requirement Analysis](#software-requirement-analysis)
  - [Table of Contents](#table-of-contents)
  - [1. PURPOSE](#1-purpose)
  - [2. SCOPE](#2-scope)
  - [3. DEFINITIONS, ACRONYMS, AND ABBREVIATIONS](#3-definitions-acronyms-and-abbreviations)
  - [4. SOFTWARE DESCRIPTION](#4-software-description)
    - [4.1 INTENDED USE](#41-intended-use)
    - [4.2 PRODUCT OVERVIEW AND FUNCTION](#42-product-overview-and-function)
    - [4.3 OPERATING ENVIRONMENT](#43-operating-environment)
    - [4.4 INTENDED USER AND PATIENT PROFILE](#44-intended-user-and-patient-profile)
  - [5. SYSTEM REQUIREMENTS](#5-system-requirements)
  - [6. SOFTWARE REQUIREMENTS](#6-software-requirements)
  - [7. SUMMARY OF CRITICAL SOFTWARE REQUIREMENT IDENTIFIED](#7-summary-of-critical-software-requirement-identified)
  - [8. UPDATE AND VERIFICATION OF SOFTWARE REQUIREMENTS](#8-update-and-verification-of-software-requirements)


## 1. PURPOSE
This software requirement specification document provides an overview of the functionality and specification of **iDental** designed to be used with **iDental**.

## 2. SCOPE

This document defines the software system requirements from system requirements. In this document, the system level requirements are verified and translated into the software realization requirements, and shall also reference the risk control measures implanted. Detail risk control measure and risk management shall be implemented and documented according to risk management plan **7 Device Hazard Analysis**

This document shall be a live document. Both the system level requirements and the software requirements shall be updated as appropriate as a result of the software requirement analysis activities.

## 3. DEFINITIONS, ACRONYMS, AND ABBREVIATIONS

## 4. SOFTWARE DESCRIPTION

### 4.1 INTENDED USE
iDental is a computer-aided detection (CADe) software to identify and mark regions in relation to suspected dental findings which include Caries (齲齒), Crown (牙冠), Alveolar bone (齒槽骨), Dentin (象牙質), Pulp (牙髓), Maxillary sinus (上顎鼻竇), Implant (植牙), Enamel (琺瑯質), Post and core (牙釘), Restoration (填補物), Periapical lesion (根尖病灶), Root canal filling (根管填充), Mandibular alveolar nerve (下齒槽神經). iDental is indicated for use by dentists for the review of bitewing (BW) radiographs acquired from adult patients aged 18 years and older.

### 4.2 PRODUCT OVERVIEW AND FUNCTION

Outline the device's capabilities, including its ability to process DICOM images, detect dental tissues, evaluate periodontal disease stages and generate diagnostic reports.

- Account Management: By logging in with an account and password, the user's identity is confirmed to prevent misuse by others. Once the account is set up, it cannot be modified; the user can only change the password. Additionally, we have created an administrator account for clients, allowing the addition, activation, and deactivation of general user accounts. The account management system is built using the ABP framework and is deployed via containerization by our engineers, with user manuals provided for client reference. For added security, the system operates exclusively within an internal network, with data transmission encrypted via HTTPS, strong password encryption, and access controls ensuring only authorized devices and users can access the system. An emergency recovery key is also available for password reset in case the admin password is lost, further enhancing data security.

- Image AI Recognition: Users can import bitewing X-rays into the product, which can then display lesion and tissue locations on the X-ray in real time using distinct color blocks.

- Periodontal Measurement: Assists dentists in automatically measuring and visualizing mesial and distal bone levels for each tooth based on imported bitewing radiographs, and evaluates the stages of periodontal disease.

- Image Editing: After recognizing the X-ray, users can edit it with functions that include rotating 90 degrees to the right, adjusting contrast and brightness, and manually drawing lines to measure lengths. To save the edited image, users must click 'Save.' The edited functions can then be saved as a new file in the designated folder.

- File Management: This product has a built-in database that allows users to create patient folders and import X-rays for recognition. Users can also search by patient ID or name to view past folders and review recognition results. The product offers file download options, enabling users to select files to download in formats such as JPEG and PNG.

- Data Backup: This product requires manual backups by the administrator to prevent permanent data loss in the event of product damage.

### 4.3 OPERATING ENVIRONMENT

The device is intended to be used in Dental clinic.

### 4.4 INTENDED USER AND PATIENT PROFILE

- Education/ Knowledge and skills/Age/Limitations
- Dentists who are clinically licensed and perform medical acts.
- Level of training:
- No need training to use given medical device
- Intended patient group:
- Adults above 18 years of age whose bitewing (BW) radiographs data required

## 5. SYSTEM REQUIREMENTS

- Hardware requirement：
- Edge:
  * CPU: Qualcomm SDA660 or higher
    * Memory: 4 GB LPDDR4x or higher
    * OS: Android 13 or higher
    * Storage:
      * eMMC: 64 GB or higher
    * Communication:
      * WLAN: IEEE 802.11 a/b/g/n/ac/k/v/r
      * Bluetooth: Bluetooth® v5.0 \+ BLE
    * Standard I/O:
      * 1 x USB3.1 Type C supporting data transmission
    * Display:
      * Orientation: Landscape
      * Resolution: 1920 x 1080 or higher
      * Display Size: 10.1" or higher
- Server:
  * CPU: Intel i5 9th Gen Processor or higher
    * Chipset: Intel Q370 or higher
    * Memory: 32 GB or higher
    * OS: Ubuntu
    * Storage:
      * PCIe X4: 1TB
    * I/O:
      * HDMI
      * USB 3.1
      * RJ45
- User requirements：
  * **Editing Function:** Click on the icon to perform actions (Functional requirements: image rotation by 90° or 180°, adjust brightness, adjust contrast, measurement, zoom in/out, display length and width).
  *  **Color Block Recognition Function:** Design an on/off icon for this feature.
  * **Periodontal Measurement Function:** This should not appear automatically; it should be displayed only after clicking on a dedicated icon.
  * **Manual Measurement Function:** Used by doctors to measure the length of an entire tooth or a root canal. The doctor can draw a line between two points to automatically display the length. Multiple lines can be drawn and displayed simultaneously. (If the off button is pressed, all lines disappear, and pressing the on button allows for new lines to be drawn.)
- Interface requirement:
  * USB 3.1 or newer
- Programming language requirements：
  * C++， Python, TypeScript
- Regulatory/ government requirements:
  * IEC 62304: 2015
  * ISO 14971: 2019
  * ISO 13485: 2016
  * ISO 27001:2022
  * IEC 62366-1:2015 Medical devices \-- Part 1: Application of usability engineering to medical devices

This section provides a high-level description of the device.：

| Req \# | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :----- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| MR01   | The device shall load image, perform periodontal analysis , display dental with periodontal stage, allow user to manipulate (view/zoom/navigate) the image through a UI.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| MR03   | The software shall manage the frontend and backend for foundational features, including account management, feature management, audit logging, file handling, settings configuration, and language localization. The frontend will provide interactive interfaces for managing user accounts, system features, logs, files, application settings, and language preferences, ensuring smooth user navigation and interaction. The backend will handle user authentication, permissions, feature state persistence, secure file operations, settings storage, and localization support, enabling seamless integration of user and system functionalities. |
| MR05   | The software shall handle all events and messaging for data integration by managing event subscriptions, dispatching and logging event messages, and retrying failed message deliveries, ensuring reliable and efficient pub/sub and event management processes.                                                                                                                                                                                                                                                                                                                                                                                        |
| MR06   | Data pre-processing is a crucial step in preparing raw medical imaging data for machine learning applications. In the context of converting DICOM files (Digital Imaging and Communications in Medicine) into a format compatible with YOLOv8 data format, the process involves several key transformations to make the data usable for the Dental segmentation models.                                                                                                                                                                                                                                                                                 |
| MR07   | Inference refers to an object detection architecture specifically designed to handle pixel-wise segmentation tasks, particularly for semantic segmentation. This makes it ideal for applications requiring fine-grained shape recognition. It is especially suitable for fields like medical image analysis, where accurately identifying the precise shapes of dental components or other regions of interest is crucial.                                                                                                                                                                                                                              |
| MR08   | In dental segmentation tasks, especially those involving the analysis of X-ray images, post-processing techniques are essential for refining the raw segmentation results and ensuring accurate interpretation of the boundaries of dental structures. OpenCV (Open Source Computer Vision Library) provides a wide range of tools that can be employed to enhance, filter, and finalize segmentation results.                                                                                                                                                                                                                                          |
| MR09   | For dental applications, particularly in tasks like dental image analysis, a Data Lake is essential for handling the influx of large amounts of data generated by ML models or raw data from Dicom. After running inference through various machine learning models, the processed data, including predictions, segmentation masks, labels, and metadata, needs to be stored in a structured manner for easy retrieval and further analysis.                                                                                                                                                                                                            |
| MR10   | The software shall manage the database for all iDental services, providing structured data storage with indexing capabilities and supporting backup and restore functionality to ensure data integrity and reliability.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| MR11   | Provide users with a product operation manual for reference during operation, and mark warnings in the manual to reduce misuse or operational errors.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| MR12   | Product packaging ensures product integrity and product labels comply with DUNS and UDI certifications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |

## 6. SOFTWARE REQUIREMENTS

This section provides a high-level description of the software requirements, it describes the software requirements including the following perspective:

- functional and capability requirements

- software system inputs and outputs;

- interfaces between the software system and other system

- software-driven alarms, warnings, and operator messages

- security requirements

- user interface requirements implemented by software

- data definition and database requirements

- installation and acceptance requirements of the delivered software at the operation and maintenance site or sites

- requirements related to methods of operation and maintenance

- requirements related to IT-network aspects

- user maintenance requirements;

- regulatory requirements

| Software requirement ID | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :---------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **SR01**                | **Frontend User Interface and Image Processing.**   \-          The software shall be capable of loading digital dental images in standard formats(Dicom). \-          The software shall display the loaded image on the user interface \-          The user interface shall provide controls for zooming, panning(?), and rotating(?) the displayed image. \-          The software shall compute periodontal analysis, calculate and display quantitative metrics related to periodontal health, including pocket depth and attachment loss                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **SR03**                | **Frontend Foundational Features Management The software shall provide a comprehensive account management interface for creating, editing, and deleting user accounts with input validation The software shall implement feature management controls allowing users to enable/disable features based on permissions The software shall display an audit logging interface for viewing, filtering and exporting system action logs The software shall include file management capabilities with archive, list view and file upload/download functionality The software shall provide settings management for application preferences with auto-save capability The software shall support multiple languages including English and Traditional Chinese with language switching capability**                                                                                                                                                                                                                                                                                                                                                                                            |
| **SR05**                | **Event Management and Data Integration The software shall implement a publish/subscribe system for event management, using a point-to-point relationship. The software shall handle event message dispatching and logging The software shall provide retry mechanisms for failed message deliveries The software shall manage event notifications across the system, using one-to-many relationships.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **SR06**                | **DICOM to Image Conversion**: The software shall convert DICOM files to OPEN CV or PIL (Python imaging library compatible files).  **Rescaling and Normalization**: The software shall rescale and normalize the per-processing data to improve model convergence. **Conversion to YOLOv8 Format**: The software shall convert per-processing data to satisfy training format.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **SR07**                | **Segmentation function**: The software shall be expected to split the dental components into different regions.  **Real-time Performance**: The software shall meet the real-time performance (e.g. \<100ms inference time) requirements.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **SR08**                | **Morphological Operations**: The software shall perform smooth surface of segmentation results. **Contour Detection and Filtering**: The software shall detect the dental contours and remove the incomplete tooth contours at the edges of the screen. **Shape Analysis and Feature Extraction**: The software shall display shape-related dental information to classify dental objects and identify irregularities.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **SR09**                | **Storing Diverse Data Types**: The software shall store various data types, including raw medical images, pre-processed data, inferred data (e.g., segmentation masks, predicted labels, confidence scores), and associated information like patient data, diagnostic reports, and treatment plans. **Data Catalog Management**: The software shall manage a metadata catalog that organizes and indexes stored data, tracking essential details such as data source, inference type, results, accuracy scores, model version, and timestamps. This facilitates data governance, discovery, and access for tasks like analysis, audits, or model training. **Data Exploration and Analytics**: The software shall enable querying of stored data for advanced analytics, allowing users to evaluate ML model performance, compare segmentation results across dental X-rays, and track patient outcomes based on model predictions. **Data Accessibility and Security**: The software shall ensure easy data access for authorized users (e.g., clinicians) while implementing role-based access control, encryption, and other security measures to protect sensitive patient data. |
| **SR10**                | **Database Management The software shall provide structured data storage capabilities The software shall implement database indexing for optimal performance The software shall include backup and restore functionality for data protection**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

## 7. SUMMARY OF CRITICAL SOFTWARE REQUIREMENT IDENTIFIED

Among the software requirements listed above, the critical software requirements that have the most significant impact on clinical functionality, performance specifications and the device’s safety and effectiveness are identified as follows:

| Req \#   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **SR01** | **Frontend User Interface and Image Processing.**   The software shall be capable of loading digital dental images in standard formats(Dicom). The software shall display the loaded image on the user interface The user interface shall provide controls for zooming, panning(?), and rotating(?) the displayed image. The software shall compute periodontal analysis, calculate and display quantitative metrics related to periodontal health, including pocket depth and attachment loss                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **SR06** | **DICOM to Image Conversion**: using libraries like pydicom in Python, which allows for reading and parsing DICOM files. The pixel data from the DICOM file is extracted and converted into a format that is compatible with image processing libraries like OpenCV or PIL (Python Imaging Library). **Rescaling and Normalization**: Dental models expect input images to be of a certain size (e.g., 640x640 pixels). Therefore, the extracted medical images need to be resized to the appropriate dimensions. In addition, pixel values are often normalized to a range between 0 and 1 to improve model convergence. **Conversion to YOLOv8 Format**: YOLOv8 annotation is in a specific format: a text file for each image containing the class ID and the coordinates of the bounding box (in normalized format: x\_center, y\_center, width, height). The coordinates are normalized by dividing by the image width and height, so they are independent of the actual size of the image.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **SR07** | **Semantic Segmentation**: Dental segmentation model consists of pixel-wise classification which ensures that all pixels belonging to the same class are grouped together, and pixels representing different classes are separated accurately. **Real-time Performance**: Dental Segmentation is optimized for real-time processing, ensuring high-speed inference even on edge devices. The customer can upload the dental pictures and inference in real-time response.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **SR08** | **Morphological Operations**: Morphological operations are essential in post-processing to refine the shapes and remove noise from the segmented image. These operations manipulate the structure of objects in an image based on their shape such as region merging and hole filling. **Contour Detection and Filtering**: After segmenting the dental structures, detecting the contours (edges) of the segmented areas is crucial for understanding the shapes and boundaries of the teeth. **Shape Analysis and Feature Extraction**: Shape analysis and feature extraction, including metrics like aspect ratio, solidity, and compactness, along with edge detection, help classify dental objects, identify irregularities (e.g., cavities), and refine segmentation boundaries (e.g., tooth side boundaries), aiding in tasks like detecting cavities or misalignment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **SR09** | **Storing Diverse Data Types:** A Data Lake can store various data types, including raw medical images, pre-processed image data, and inferred data such as segmentation masks, predicted labels, confidence scores, and metadata. It can also store other associated information, such as patient data, diagnostic reports, and treatment plans. **Data Catalog Management**: A crucial component of the Data Lake, serving as a metadata repository that organizes and indexes the stored data. After machine learning inference is performed on dental images, the catalog tracks essential information, including the source of the data (e.g., a specific patient, dental clinic, or study), the type of inference performed (e.g., segmentation, classification), the results and associated metadata (e.g., accuracy scores, model version), and timestamps and data access logs. This metadata not only aids in data governance but also facilitates the easy discovery and access to specific datasets or results, supporting tasks such as analysis, audits, or further model training. **Data Exploration and Analytics**: Once data is stored in a Data Lake, it becomes easier to run advanced analytics and machine learning workflows. Researchers or clinicians can query the stored data to evaluate the performance of different ML models, compare segmentation results across a large dataset of dental X-rays, track patient outcomes based on model predictions. **Data Accessibility and Security**: Data lakes are designed to provide easy access to data, whether it's for data scientists running analysis, clinicians reviewing model predictions, or researchers conducting studies. However, privacy and data security are especially important in the healthcare and dental sectors. The Data Lake will include role-based access control, encryption, and other security measures to ensure that sensitive patient data remains secure. |

## 8. UPDATE AND VERIFICATION OF SOFTWARE REQUIREMENTS

Before this document is released, all software requirements shall be reviewed to ensure the following:

| Item                                                                                    | Pass/Fail | Check by |
| :-------------------------------------------------------------------------------------- | :-------- | :------- |
| implement SYSTEM requirements including those relating to Risk control                  | Pass      | John Doe |
| do not contradict one another                                                           | Pass      | John Doe |
| are expressed in terms that avoid ambiguity                                             | Pass      | John Doe |
| are stated in terms that permit establishment of test criteria and performance of tests | Pass      | John Doe |
| can be uniquely identified                                                              | Pass      | John Doe |
| are traceable to SYSTEM requirements or other source                                    | Pass      | John Doe |

Corresponding detailed verification shall be documented in the device(system) validation report. The document shall update as required in the software development and maintenance plan.